<template is="leave-message" data="{{new: false}}"></template>
<template is="list" data="{{list: featuredList}}"></template>
<template is="leave-message" data="{{new: true}}"></template>

<!-- 留言标识 -->
<template name="leave-message">
  <div class="leave-message">
    <div class="line"></div>
    <div class="center">
      <image class="img" src="./img/{{new ? 'new' : 'featured'}}.svg" />
      <span>{{new ? '最新留言' : '精选留言'}}</span>
    </div>
    <div class="line"></div>
  </div>
</template>
<!-- 列表 -->
<template name="list">
  <div class="list">
    <block wx:for="{{list}}" wx:for-index="i" wx:for-item="e" wx:key="{{i}}">
      <div class="one">
        <div class="user-head">
          <image mode="aspectFill" src="{{e.user.head}}" />
        </div>
        <div class="main">
          <div class="user">
            <div class="info">
              <text class="name">{{e.user.name}}</text>
            </div>
            <i class="more iconfont icon-misc"></i>
          </div>
          <div class="text-content">{{e.text}}</div>
          <div class="imgs">
            <block wx:for="{{e.imgs}}" wx:for-item="src" wx:key="{{index}}">
              <image class="img img{{e.imgs.length}}" mode="aspectFill" src="{{src}}" />
            </block>
          </div>
          <template is="comments-like" data="{{e}}"></template>
          <template is="comments" data="{{e}}"></template>
        </div>
      </div>
    </block>
  </div>
</template>
<!-- 评论 -->
<template name="comments">
  <div class="comments">
    <div class="comment" wx:for="{{e.comments}}" wx:key="index">
      <div wx:if="{{item.who.sponsor}}" class="who sponsor">{{item.who.name}}（发起人）</div>
      <div wx:else class="who">{{item.who.name}}</div>
      <div class="at" wx:if="{{item.at}}">{{item.at.name}}</div>
      <div class="text">{{item.text}}</div>
    </div>
  </div>
</template>
<!-- 喜欢 -->
<template name="comments-like">
  <div class="comments-like">
    <div class="left">
      <div class="heads">
        <block wx:for="{{e.like}}" wx:for-item="src" wx:key="{{index}}">
          <image class="head" mode="aspectFill" src="{{src}}" />
        </block>
      </div>
      <div>{{e.likePerson}} 人点赞</div>
    </div>
    <div class="right">
      <i class="iconfont icon-comm_cmts"></i>
      <i class="iconfont icon-comm-like"></i>
    </div>
  </div>
</template>
