<template is="leave-message" data="{{new: false}}"></template>
<template is="list" data="{{list: featuredList, new: false}}"></template>
<template is="leave-message" data="{{new: true}}"></template>
<template is="list" data="{{list: newList, new: true}}"></template>

<!-- 留言标识 -->
<template name="leave-message">
  <div class="leave-message">
    <div class="line"></div>
    <div class="center">
      <image class="img" src="./img/{{new ? 'new' : 'featured'}}.svg" />
      <span>{{new ? '最新留言' : '精选留言'}}</span>
    </div>
    <div class="line"></div>
  </div>
</template>
<!-- 列表 -->
<template name="list">
  <div class="list">
    <block wx:for="{{list}}" wx:for-index="i" wx:for-item="e" wx:key="{{i}}">
      <div class="one">
        <div class="user-head">
          <image mode="aspectFill" src="{{e.user.head}}" />
        </div>
        <div class="main">
          <div class="user">
            <div class="info">
              <text class="name {{e.user.sponsor ? 'sponsor' : ''}}"
                >{{e.user.name}}{{e.user.sponsor ? '（发起人）' : ''}}</text
              >
            </div>
            <i
              bind:tap="bindMore"
              data-i="{{i}}"
              data-new="{{new}}"
              class="more iconfont icon-misc"
            ></i>
          </div>
          <div class="text-content">{{e.text}}</div>
          <div class="imgs">
            <block wx:for="{{e.imgs}}" wx:for-item="src" wx:key="{{index}}">
              <image class="img img{{e.imgs.length}}" mode="aspectFill" src="{{src}}" />
            </block>
          </div>
          <template is="comments-like" data="{{e, i, new}}"></template>
          <template is="comments" data="{{e}}"></template>
        </div>
      </div>
    </block>
  </div>
</template>
<!-- 评论 -->
<template name="comments">
  <div class="comments" wx:if="{{e.comments && e.comments[0]}}">
    <div class="comment" wx:for="{{e.comments}}" wx:key="index">
      <div class="who {{item.who.sponsor ? 'sponsor' : ''}}">
        {{item.who.name}}{{item.who.sponsor ? '（发起人）' : ''}}
      </div>
      <div class="at {{item.at.sponsor ? 'sponsor' : ''}}" wx:if="{{item.at}}">
        @{{item.at.name}}{{item.at.sponsor ? '（发起人）' : ''}}
      </div>
      <div class="text">{{item.text}}</div>
    </div>
  </div>
</template>
<!-- 喜欢 -->
<template name="comments-like">
  <div class="comments-like">
    <div class="left">
      <div class="heads">
        <block wx:for="{{e.like}}" wx:for-item="src" wx:key="{{index}}">
          <image class="head" mode="aspectFill" src="{{src}}" />
        </block>
      </div>
      <div>{{e.likePerson}} 人点赞</div>
    </div>
    <div class="right">
      <i
        bind:tap="bindComment"
        data-i="{{i}}"
        data-new="{{new}}"
        class="iconfont icon-comm_cmts"
      ></i>
      <i
        bind:tap="bindHeart"
        data-i="{{i}}"
        data-new="{{new}}"
        class="iconfont icon-comm-like{{e.likeHeart ? 'd' : ''}}"
      ></i>
    </div>
  </div>
</template>
